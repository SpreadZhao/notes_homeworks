---
num: "15"
title: 3 Sum
link: https://leetcode.cn/problems/3sum/description/
tags:
  - leetcode/difficulty/medium
  - algo/array
  - algo/two-pointers
  - algo/sorting
---

# é¢˜è§£

è¿™é¢˜æ˜¯[[Projects/leetcode/1 Two Sum|1 Two Sum]]çš„å‡çº§ç‰ˆï¼Œä½†æ˜¯æˆ‘è‡ªå·±çœŸæ²¡åšå‡ºæ¥ã€‚ã€‚ã€‚

é¦–å…ˆï¼Œæš´åŠ›ç‰ˆæœ¬è‚¯å®šå¾ˆå¥½å†™ï¼Œä¸‰é‡å¾ªç¯å‘—ï¼Œä½†æ˜¯ä¸ç®¡ä½ æ€ä¹ˆåšéƒ½æ˜¯è¶…æ—¶ï¼š

```cpp
vector<vector<int>> Solution::threeSum(vector<int> &nums) {
    // timeover
    vector<vector<int>> res;
    sort(nums.begin(), nums.end());
    for (int i = 0; i < nums.size() - 2; i++) {
        for (int j = i + 1; j < nums.size() - 1; j++) {
            for (int k = j + 1; k < nums.size(); k++) {
                const int sum = nums[i] + nums[j] + nums[k];
                if (sum > 0) {
                    break;
                }
                if (sum == 0) {
                    res.push_back({nums[i], nums[j], nums[k]});
                    break;
                }
            }
        }
    }
    return res;
}
```

åŒæ—¶ï¼Œä¸Šé¢çš„ç‰ˆæœ¬è¿˜æœ‰ä¸ªé”™è¯¯ã€‚æ¯”å¦‚è¾“å…¥æ˜¯`[-1,0,1,2,-1,-4]`ã€‚é‚£ä¹ˆè¾“å‡ºæ˜¯ï¼š

```
[-1, -1, 2]
[-1, 0, 1]
[-1, 0, 1]
```

æœ‰é‡å¤çš„ï¼Œä¸ç¬¦åˆè¦æ±‚ã€‚ç¨å¾®çŸäº†çœ¼ç­”æ¡ˆï¼Œå‘ç°è¿™é‡Œçš„å¾ªç¯é€’å¢æœ‰é—®é¢˜ã€‚å¦‚æœä½ è¿™ä¸ªiå·²ç»æŒ‡å‘-1äº†ï¼Œé‚£ä¸‹æ¬¡å¦‚æœè¿˜æ˜¯æŒ‡å‘-1ï¼Œå…¶å®æ²¡å¿…è¦ã€‚æ‰€ä»¥è¿™é‡ŒæŠŠé€’å¢çš„é€»è¾‘æ”¹äº†ä¸‹ï¼š

```cpp
static int next(const vector<int> &nums, int curr) {
    if (curr >= nums.size() - 1) {
        return curr + 1;
    }
    int next = curr + 1;
    while (next < nums.size() && nums[next] == nums[curr]) {
        ++next;
    }
    return next;
}

vector<vector<int>> Solution::threeSum(vector<int> &nums) {
    // timeover
    vector<vector<int>> res;
    sort(nums.begin(), nums.end());
    for (int i = 0; i < nums.size() - 2; i++) {
        for (int j = i + 1; j < nums.size() - 1; j = next(nums, j)) {
            for (int k = j + 1; k < nums.size(); k = next(nums, k)) {
                const int sum = nums[i] + nums[j] + nums[k];
                if (sum > 0) {
                    break;
                }
                if (sum == 0) {
                    res.push_back({nums[i], nums[j], nums[k]});
                    break;
                }
            }
        }
    }
    return res;
}
```

ä½†æ˜¯è¯¥è¶…æ—¶è¿˜æ˜¯è¶…æ—¶ã€‚ä¸è¡Œã€‚ã€‚ã€‚ç”šè‡³æ›´å¤æ‚äº†æ¯”ä¹‹å‰ã€‚

ç„¶åï¼Œæˆ‘æƒ³åˆ°äº†[[Projects/leetcode/1 Two Sum|1 Two Sum]]é‡Œçš„é‚£ä¸ªåŒæŒ‡é’ˆè§£æ³•ã€‚æ¢åˆ°è¿™é“é¢˜é‡Œå°±æ˜¯å¤šäº†ä¸€æ­¥ï¼Œè¦å…ˆå›ºå®šä¸€ä¸ªæŒ‡é’ˆï¼Œç„¶åè®©å¦å¤–ä¸¤ä¸ªæŒ‡é’ˆèµ°two sumçš„é€»è¾‘ï¼š

```cpp
vector<vector<int> > Solution::threeSum2(vector<int> &nums) {
    // error
    vector<vector<int>> res;
    sort(nums.begin(), nums.end());
    for (int i = 0; i < nums.size() - 2; i = next(nums, i)) {
        int j = i + 1, k = nums.size() - 1;
        while (j < k) {
            const int sum = nums[i] + nums[j] + nums[k];
            if (sum == 0) {
                res.push_back({nums[i], nums[j], nums[k]});
                j++;
                k--;
            } else if (sum > 0) {
                k--;
            } else {
                j++;
            }
        }
    }
    return res;
}
```

ä½†æ˜¯è¿˜æ˜¯é”™çš„ã€‚çœŸä¸çŸ¥é“ä¸ºå•¥ã€‚ã€‚ã€‚

æœ€åæˆ‘çœ‹ç­”æ¡ˆï¼Œå…¶å®å’Œæˆ‘è¿™ä¸ªæ€è·¯æ˜¯å·®ä¸å¤šçš„ã€‚å°±æ˜¯å¤šäº†ä¸€äº›è¾¹ç•Œåˆ¤æ–­ã€‚

```cpp
vector<vector<int>> Solution::threeSum3(vector<int> &nums) {
    sort(nums.begin(), nums.end());
    vector<vector<int>> res;
    for (int i = 0; i < nums.size(); i++) {
        if (i > 0 && nums[i] == nums[i - 1]) {
            continue;
        }
        int j = i + 1, k = nums.size() - 1;
        const int target = -nums[i];
        while (j < k) {
            const int sum = nums[j] + nums[k];
            if (sum == target) {
                res.push_back({nums[i], nums[j], nums[k]});
                j++;
                k--;
                while (j < k && nums[j] == nums[j - 1]) j++;
                while (j < k && nums[k] == nums[k + 1]) k--;
            } else if (sum < target) {
                j++;
            } else {
                k--;
            }
        }
    }
    return res;
}
```

å¤šäº†å‡ ä¸ªè¦ç‚¹ï¼š

- i,j,kéƒ½æ˜¯éœ€è¦è·³è¿‡é‡å¤å…ƒç´ çš„ã€‚å¦‚æœèµ°åˆ°ä¸‹ä¸€ä¸ªï¼Œè¿˜æ˜¯ä¸€æ ·çš„ï¼Œé‚£å…¶å®æ²¡æœ‰å¿…è¦ç®—ï¼›
- è¿™é‡Œä¸æ˜¯ä¸‰è€…ç›¸åŠ ç­‰äº0ï¼Œè€Œæ˜¯è®©åŒæŒ‡é’ˆç›¸åŠ ç­‰äº`-nums[i]`ã€‚å¥½å¤„å°±æ˜¯è¿™ä¸ªtargetå¯ä»¥è¢«é‡å¤åˆ©ç”¨ï¼Œwhileå¾ªç¯èµ°çš„æ—¶å€™ä¸ç”¨æ¯æ¬¡éƒ½ç®—ä¸€éå’Œã€‚

- [ ] #TODO tasktodo1741453298729 3 suméœ€è¦é‡æ„ä¸€é â• 2025-03-09 â« ğŸ†” ha1272